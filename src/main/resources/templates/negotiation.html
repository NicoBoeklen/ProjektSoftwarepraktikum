<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--<th:block th:insert="~{fragments/htmlHead :: head}"></th:block>-->
    <title>Negotiation</title>
    <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/6487/6487865.png">
    <link rel="stylesheet" type="text/css" href="logo.css"/>
    <link rel="stylesheet" type="text/css" href="negotiation.css"/>
    <script>
        function logout() {
            window.location.href = "login?logout";
        }

        function validateInput() {
            let time = parseInt(document.getElementById("time").value);
            let resLevel = document.getElementById("valueReservationLevel").value;
            let aspLevel = document.getElementById("valueAspirationLevel").value;
            let errorContainer = document.getElementById("errorContainer");
            let errorContainerText = document.getElementById("errorContainerText");

            errorContainerText.innerHTML = "";
            errorContainer.hidden = true;
            // Check if time is negative
            if (time <= 0) {
                errorContainerText.innerHTML = "Chosen time can not be negativ or null!";
                errorContainer.hidden = false;
                return false;
            }
            if (resLevel > aspLevel) {
                errorContainerText.innerHTML = "Aspiration Level has to be higher than Reservation Level!";
                errorContainer.hidden = false;
                return false;
            }
            return true;
        }

        function hideError() {
            let errorContainer = document.getElementById('errorContainer');
            errorContainer.hidden = true;
        }
    </script>
</head>
<body style="background-color: #343a40">

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="/">
            <div class="logo-image">
                <img src="https://cdn-icons-png.flaticon.com/512/6487/6487865.png" class="img-fluid">
            </div>
        </a>
        <a class="navbar-brand text-primary" href="#">SOPRA Negotiation Website</a>
        <button class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active text-primary" aria-current="page" href="/">Home</a>
                </li>

            </ul>
            <ul class="nav navbar-nav ml-auto mb-2 mb-lg-0">
                <i class="fa fa-user icon"></i>
                <form th:action="@{/logout}" method="post">
                    <input type="submit" value="Log out" class="btn btn-primary"/></form>
            </ul>
        </div>

    </div>
</nav>
<div class="container-fluid bg-dark text-white p-5">
    <h1>Negotiation goals</h1><br>
    <h4 th:text="'Please fill in the following parameters'"></h4>
    <br>
    <div id="errorContainer" hidden class="alert alert-danger alert-dismissible fade show">
        <p><strong>Warning:</strong> <span id="errorContainerText"></span></p>
        <button onclick="hideError()" type="button" class="close">&times;</button>
    </div>
    <div class="row">
        <div class="col-5">
            <form th:object="${negModel}" th:action="@{/negotiation}" method="post" onsubmit="return validateInput()">
                <label for="input1">TKI-Style</label>
                <br>
                <select id="input1" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example"
                        required th:field="*{selectedTKIStyle}">
                    <option selected hidden value="">Choose your favoured TKI-Style</option>
                    <option value="1">Avoiding</option>
                    <option value="2">Compromising</option>
                    <option value="3">Competing</option>
                    <option value="4">Collaborating</option>
                    <option value="5">Accomodating</option>
                </select>
                <br>
                <label for="input2">Most important Issue</label>
                <br>
                <select id="input2" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example"
                        required th:field="*{selectedIssue}">
                    <option selected hidden value="">Choose your most important issue</option>
                    <option value="1">Issue a</option>
                    <option value="2">Issue b</option>
                    <option value="3">Issue c</option>
                    <option value="4">Issue d</option>
                    <option value="5">Issue e</option>
                </select>
                <br>
                <br>
                <div class="form-group">
                    <label for="time">How fast do you need a conclusion?</label>
                    <input type="number" id="time" name="timeRange" class="issue-range" placeholder="Number of days"
                           required th:field="*{selectedNumberOfDays}">
                </div>
                <br>
                <div class="slider-group">
                    <label for="aspirationLevel">Aspiration Level (in %)</label>
                    <input th:field="*{selectedAspirationLevel}" oninput="this.nextElementSibling.value = this.value"
                           min="0" max="100" type="range"
                           id="aspirationLevel" name="aspirationLevel" class="issue-range" required/>
                    <output id="valueAspirationLevel">50</output>
                    <br>
                    <label for="reservationLevel">Reservation Level (in %)</label>
                    <input th:field="*{selectedReservationLevel}" oninput="this.nextElementSibling.value = this.value"
                           min="0" max="100" type="range"
                           id="reservationLevel" name="reservationLevel" class="issue-range" required/>
                    <output id="valueReservationLevel">50</output>
                </div>
                <br>
                <button type="submit" class="btn btn-primary">Request feedback</button>

            </form>
        </div>
        <div class="col-5 border">
            <h4>TKI-Style?</h4>
            <p>The TKI-Style refers to negotiation styles based on the Thomas-Kilmann Conflict Mode Instrument (TKI). It
                assesses individuals' preferred approaches to handling conflict through five styles. By understanding
                their preferred style, negotiators can develop effective strategies to navigate conflicts and work
                towards mutually beneficial resolutions.</p>
            <br>
            <h4>Aspiration Level?</h4>
            <p>The Aspiration Level is the value of the desired utility in %. In other words, what you want to
                achieve.</p>
            <br>
            <h4>Reservation Level?</h4>
            <p>The Reservation Level is the lowest value of the Utility in % that you would accept.</p>
        </div>
    </div>

</div>
<footer class="text-center text-white" style="background-color: #292828">

    <div class="container">

        <section class="mt-5">

            <div class="row text-center d-flex justify-content-center pt-5">

                <div class="col-md-2">
                    <h6 class="text-uppercase font-weight-bold">
                        <a href="/aboutus" class="text-white">About us</a>
                    </h6>
                </div>
            </div>

        </section>


        <hr class="my-5"/>


        <section class="mb-5">
            <div class="row d-flex justify-content-center">
                <div class="col-lg-8">
                    <p>
                        This site is designed to provide users with feedback on their negotiations in order to get
                        better in further negotiations!
                    </p>
                </div>
            </div>
        </section>

    </div>
    <div
            class="text-center p-3"
            style="background-color: rgba(0, 0, 0, 0.2)"
    >
        Â© 2023 Copyright:
        <a class="text-white" href="http://localhost:8080"
        >SOPRANegotiation.com</a
        >
    </div>
</footer>
</div>
</body>
</html>